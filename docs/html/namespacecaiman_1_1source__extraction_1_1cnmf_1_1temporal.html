<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Caiman: caiman.source_extraction.cnmf.temporal Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="Caiman_logo_FIsmall.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Caiman
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">A Computational toolbox for large scale Calcium Imaging Analysis</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('namespacecaiman_1_1source__extraction_1_1cnmf_1_1temporal.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">caiman.source_extraction.cnmf.temporal Namespace Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a56e480ac2ab46fee26898bb78677ab6c"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecaiman_1_1source__extraction_1_1cnmf_1_1temporal.html#a56e480ac2ab46fee26898bb78677ab6c">make_G_matrix</a> (T, g)</td></tr>
<tr class="memdesc:a56e480ac2ab46fee26898bb78677ab6c"><td class="mdescLeft">&#160;</td><td class="mdescRight">create matrix of autoregression to enforce indicator dynamics  <a href="#a56e480ac2ab46fee26898bb78677ab6c">More...</a><br /></td></tr>
<tr class="separator:a56e480ac2ab46fee26898bb78677ab6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ede407f1e0d0722f51ddb6e99f48f9f"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecaiman_1_1source__extraction_1_1cnmf_1_1temporal.html#a2ede407f1e0d0722f51ddb6e99f48f9f">constrained_foopsi_parallel</a> (arg_in)</td></tr>
<tr class="memdesc:a2ede407f1e0d0722f51ddb6e99f48f9f"><td class="mdescLeft">&#160;</td><td class="mdescRight">necessary for parallel computation of the function constrained_foopsi  <a href="#a2ede407f1e0d0722f51ddb6e99f48f9f">More...</a><br /></td></tr>
<tr class="separator:a2ede407f1e0d0722f51ddb6e99f48f9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae56ee735c5b8f6fdaca8baaee1371d58"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecaiman_1_1source__extraction_1_1cnmf_1_1temporal.html#ae56ee735c5b8f6fdaca8baaee1371d58">update_temporal_components</a> (Y, A, b, Cin, fin, bl=None, c1=None, g=None, sn=None, nb=1, ITER=2, method_foopsi='constrained_foopsi', block_size=20000, memory_efficient=False, debug=False, dview=None, kwargs)</td></tr>
<tr class="memdesc:ae56ee735c5b8f6fdaca8baaee1371d58"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update temporal components and background given spatial components using a block coordinate descent approach.  <a href="#ae56ee735c5b8f6fdaca8baaee1371d58">More...</a><br /></td></tr>
<tr class="separator:ae56ee735c5b8f6fdaca8baaee1371d58"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a2ede407f1e0d0722f51ddb6e99f48f9f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ede407f1e0d0722f51ddb6e99f48f9f">&#9670;&nbsp;</a></span>constrained_foopsi_parallel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def caiman.source_extraction.cnmf.temporal.constrained_foopsi_parallel </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>arg_in</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>necessary for parallel computation of the function constrained_foopsi </p>

<p class="definition">Definition at line <a class="el" href="temporal_8py_source.html#l00052">52</a> of file <a class="el" href="temporal_8py_source.html">temporal.py</a>.</p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="namespacecaiman_1_1source__extraction_1_1cnmf_1_1temporal_a2ede407f1e0d0722f51ddb6e99f48f9f_cgraph.svg" width="2542" height="210"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a56e480ac2ab46fee26898bb78677ab6c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a56e480ac2ab46fee26898bb78677ab6c">&#9670;&nbsp;</a></span>make_G_matrix()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def caiman.source_extraction.cnmf.temporal.make_G_matrix </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>T</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>g</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>create matrix of autoregression to enforce indicator dynamics </p>
<dl class="section user"><dt>Inputs</dt><dd>T positive integer number of time-bins g nd.array, vector p x 1 Discrete time constants</dd></dl>
<dl class="section user"><dt>Output</dt><dd>G sparse diagonal matrix Matrix of autoregression </dd></dl>

<p class="definition">Definition at line <a class="el" href="temporal_8py_source.html#l00034">34</a> of file <a class="el" href="temporal_8py_source.html">temporal.py</a>.</p>

</div>
</div>
<a id="ae56ee735c5b8f6fdaca8baaee1371d58"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae56ee735c5b8f6fdaca8baaee1371d58">&#9670;&nbsp;</a></span>update_temporal_components()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def caiman.source_extraction.cnmf.temporal.update_temporal_components </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>Y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>A</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>b</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>Cin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>fin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>bl</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>c1</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>g</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>sn</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>nb</em> = <code>1</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>ITER</em> = <code>2</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>method_foopsi</em> = <code>'constrained_foopsi'</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>block_size</em> = <code>20000</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>memory_efficient</em> = <code>False</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>debug</em> = <code>False</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>dview</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>kwargs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Update temporal components and background given spatial components using a block coordinate descent approach. </p>
<h2>Parameters </h2>
<p>Y np.ndarray (2D) input data with time in the last axis (d x T)</p>
<p>A sparse matrix (crc format) matrix of temporal components (d x K)</p>
<p>b ndarray (dx1) current estimate of background component</p>
<p>Cin np.ndarray current estimate of temporal components (K x T)</p>
<p>fin np.ndarray current estimate of temporal background (vector of length T)</p>
<p>g np.ndarray Global time constant (not used)</p>
<p>bl np.ndarray baseline for fluorescence trace for each column in A</p>
<p>c1 np.ndarray initial concentration for each column in A</p>
<p>g np.ndarray discrete time constant for each column in A</p>
<p>sn np.ndarray noise level for each column in A</p>
<p>nb [optional] int Number of background components</p>
<p>ITER positive integer Maximum number of block coordinate descent loops.</p>
<p>method_foopsi string Method of deconvolution of neural activity. constrained_foopsi is the only method supported at the moment.</p>
<p>n_processes int number of processes to use for parallel computation. Should be less than the number of processes started with ipcluster.</p>
<p>backend 'str' single_thread no parallelization ipyparallel, parallelization using the ipyparallel cluster. You should start the cluster (install ipyparallel and then type ipcluster -n 6, where 6 is the number of processes). SLURM using SLURM scheduler</p>
<p>memory_efficient Bool whether or not to optimize for memory usage (longer running times). nevessary with very large datasets</p>
<p>**kwargs: dict all parameters passed to constrained_foopsi except bl,c1,g,sn (see documentation). Some useful parameters are</p>
<p>p int order of the autoregression model</p>
<p>method [optional] string solution method for constrained foopsi. Choices are 'cvx': using cvxopt and picos (slow especially without the MOSEK solver) 'cvxpy': using cvxopt and cvxpy with the ECOS solver (faster, default)</p>
<p>solvers list string primary and secondary (if problem unfeasible for approx solution) solvers to be used with cvxpy, default is ['ECOS','SCS']</p>
<h2></h2>
<p>The temporal components are updated in parallel by default by forming of sequence of vertex covers.</p>
<h2></h2>
<dl class="section return"><dt>Returns</dt><dd>C np.ndarray matrix of temporal components (K x T)</dd>
<dd>
f np.array vector of temporal background (length T)</dd>
<dd>
S np.ndarray matrix of merged deconvolved activity (spikes) (K x T)</dd>
<dd>
bl float same as input</dd>
<dd>
c1 float same as input</dd>
<dd>
g float same as input</dd>
<dd>
sn float same as input</dd>
<dd>
YrA np.ndarray matrix of spatial component filtered raw data, after all contributions have been removed. YrA corresponds to the residual trace for each component and is used for faster plotting (K x T) </dd></dl>

<p class="definition">Definition at line <a class="el" href="temporal_8py_source.html#l00174">174</a> of file <a class="el" href="temporal_8py_source.html">temporal.py</a>.</p>
<div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="namespacecaiman_1_1source__extraction_1_1cnmf_1_1temporal_ae56ee735c5b8f6fdaca8baaee1371d58_cgraph.svg" width="968" height="116"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="namespacecaiman_1_1source__extraction_1_1cnmf_1_1temporal_ae56ee735c5b8f6fdaca8baaee1371d58_icgraph.svg" width="563" height="51"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacecaiman.html">caiman</a></li><li class="navelem"><a class="el" href="namespacecaiman_1_1source__extraction.html">source_extraction</a></li><li class="navelem"><a class="el" href="namespacecaiman_1_1source__extraction_1_1cnmf.html">cnmf</a></li><li class="navelem"><a class="el" href="namespacecaiman_1_1source__extraction_1_1cnmf_1_1temporal.html">temporal</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
